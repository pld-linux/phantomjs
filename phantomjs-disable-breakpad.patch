--- phantomjs-2.0.0/src/crashdump.cpp~	2015-01-24 03:19:52.000000000 +0100
+++ phantomjs-2.0.0/src/crashdump.cpp	2015-03-31 10:42:18.791404606 +0200
@@ -37,7 +37,7 @@
 #include <exception>
 #include <cstdlib>
 
-#ifdef Q_OS_LINUX
+#if 0
 #include "client/linux/handler/exception_handler.h"
 #define HAVE_BREAKPAD
 #define EHC_EXTRA_ARGS true
--- phantomjs-2.0.0/src/phantomjs.pro~	2015-03-31 12:19:42.000000000 +0200
+++ phantomjs-2.0.0/src/phantomjs.pro	2015-03-31 12:20:46.849769573 +0200
@@ -68,44 +68,6 @@ LIBS += -lmongoose
 LIBS += -llinenoise
 LIBS += -lqcommandline
 
-linux*|mac|openbsd* {
-    INCLUDEPATH += breakpad/src
-
-    SOURCES += breakpad/src/client/minidump_file_writer.cc \
-      breakpad/src/common/convert_UTF.c \
-      breakpad/src/common/md5.cc \
-      breakpad/src/common/string_conversion.cc 
-}
-
-linux* {
-    SOURCES += breakpad/src/client/linux/crash_generation/crash_generation_client.cc \
-      breakpad/src/client/linux/handler/exception_handler.cc \
-      breakpad/src/client/linux/log/log.cc \
-      breakpad/src/client/linux/minidump_writer/linux_dumper.cc \
-      breakpad/src/client/linux/minidump_writer/linux_ptrace_dumper.cc \
-      breakpad/src/client/linux/minidump_writer/minidump_writer.cc \
-      breakpad/src/common/linux/file_id.cc \
-      breakpad/src/common/linux/guid_creator.cc \
-      breakpad/src/common/linux/memory_mapped_file.cc \
-      breakpad/src/common/linux/safe_readlink.cc
-}
-
-mac {
-    SOURCES += breakpad/src/client/mac/crash_generation/crash_generation_client.cc \
-      breakpad/src/client/mac/handler/exception_handler.cc \
-      breakpad/src/client/mac/handler/minidump_generator.cc \
-      breakpad/src/client/mac/handler/dynamic_images.cc \
-      breakpad/src/client/mac/handler/breakpad_nlist_64.cc \
-      breakpad/src/common/mac/bootstrap_compat.cc \
-      breakpad/src/common/mac/file_id.cc \
-      breakpad/src/common/mac/macho_id.cc \
-      breakpad/src/common/mac/macho_utilities.cc \
-      breakpad/src/common/mac/macho_walker.cc \
-      breakpad/src/common/mac/string_utilities.cc
-
-    OBJECTIVE_SOURCES += breakpad/src/common/mac/MachIPC.mm
-}
-
 win32: RC_FILE = phantomjs_win.rc
 os2:   RC_FILE = phantomjs_os2.rc
 
@@ -119,10 +81,6 @@ mac {
 
 win32-msvc* {
     LIBS += -lCrypt32 -llibxml2
-    INCLUDEPATH += breakpad/src
-    SOURCES += breakpad/src/client/windows/handler/exception_handler.cc \
-      breakpad/src/client/windows/crash_generation/crash_generation_client.cc \
-      breakpad/src/common/windows/guid_string.cc
     CONFIG(static) {
         DEFINES += STATIC_BUILD
     }
--- phantomjs-2.0.0/src/crashdump.h~	2015-01-24 03:19:52.000000000 +0100
+++ phantomjs-2.0.0/src/crashdump.h	2015-03-31 13:02:08.664129280 +0200
@@ -31,9 +31,11 @@
 #ifndef CRASHDUMP_H
 #define CRASHDUMP_H
 
+#ifdef HAVE_BREAKPAD
 namespace google_breakpad {
     class ExceptionHandler;
 }
+#endif
 
 class CrashHandler
 {
@@ -43,7 +45,9 @@
 
 private:
     void (*old_terminate_handler)();
+#ifdef HAVE_BREAKPAD
     google_breakpad::ExceptionHandler *eh;
+#endif
 };
 
 #endif // CRASHDUMP_H
--- phantomjs-2.0.0/src/crashdump.cpp~	2015-03-31 13:02:35.000000000 +0200
+++ phantomjs-2.0.0/src/crashdump.cpp	2015-03-31 13:05:36.369213390 +0200
@@ -188,12 +188,16 @@
 // and crash promptly if not.
 
 CrashHandler::CrashHandler()
-  : old_terminate_handler(std::set_terminate(std::abort)),
-    eh(initBreakpad())
+  : old_terminate_handler(std::set_terminate(std::abort))
+#ifdef HAVE_BREAKPAD
+    ,eh(initBreakpad())
+#endif
 {}
 
 CrashHandler::~CrashHandler()
 {
+#ifdef HAVE_BREAKPAD
   delete eh;
+#endif
   std::set_terminate(old_terminate_handler);
 }
